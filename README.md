# Отчёт по лабораторной работе №3

Выполнили: Генне Константин K3240 и Савченко Анастасия K3241

## Техническое задание

1. Написать “плохой” CI/CD файл, который работает, но в нем есть не менее пяти “bad practices” по написанию CI/CD
2. Написать “хороший” CI/CD, в котором эти плохие практики исправлены
3. В Readme описать каждую из плохих практик в плохом файле, почему она плохая и как в хорошем она была исправлена, как исправление повлияло на результат
4. Прочитать историю про Васю (она быстрая, забавная и того стоит): https://habr.com/ru/articles/689234/   ✔️

# Основная часть

## 1 Использование ubuntu:latest 
### Плохо 
```yml
jobs:
  build:
    runs-on: ubuntu:latest
```
Автоматическое использование последней версии может привести к неожиданным проблемам с интеграцией и совместимостью
### Хорошо
```yml
jobs:
  build:
    runs-on: ubuntu-20.04
```
Для стабильной работы лучше выбрать конкретную версию
## 2 Все в одном pipeline
### Плохо 
```yaml
big_job:
    runs-on: ubuntu-latest
    steps:
      - name: Build
        run: ./build.sh
      - name: Unit tests
        run: ./unit-tests.sh
      - name: Integration tests
        run: ./integration-tests.sh
      - name: Deploy
        run: ./deploy.sh
```

### Хорошо
```yml
stages:
  - build
  - test
  - deploy

build-job:
  stage: build
  runs-on: ubuntu-20.04


test-job:
  stage: test
  runs-on: ubuntu-20.04
  needs: build


deploy-job:
  stage: deploy
  runs-on: ubuntu-20.04
  needs: test

```
Будет лучше разделить пайплайн на этапы (сборка, тесты, деплой). Так CI/CD будет гибче  его станет легче масштабировать. И добавим условия для начала следующего этапа пайплайна, так деплой не сможет начаться, если не были пройдены тесты, а те не начнутся без успешно сборки.

Кэширование позволяет ускорить сборку и тест ci
## 4 npm install
### Плохо 
```yml
- name: Install dependencies
  run: npm install
```
Может привести к медленной работе и несовметимостям
### Хорошо
```yml
- name: Install dependencies
  run: npm ci
```
Исспользование npm ci предотвращает накопление ненужных файлов и ускаряет установку зависимостей, а следовательно и время сборки


_______
# NEW TRY
## 1 Отсутствие названий джоб и комметнатиев шагов
### Плохо 
```yml


```
-: Непонятно, затрудняет отладку и поддержку
Если разбираться будет не человек, который писал yml, то это будет долго, да и спустя время самому можно забыть, что ввообще делается на каждом шаге
### Хорошо
```yml


```
Используются названия джоб, по которым потно, что каждая из них делает, у шагов тоже есть пояснения name.
## 2 Запус на каждый commit или push
Лучше подумать когда нужно запускать piplene именно для вашего проекта. Это может быть при push в main или при pull_request в основную ветку. (Просто показалось интересным: можно вообще запускать по расписанию используя schedule: - cron:)
### Плохо 
```yml
on:
  push:
    branches:
      - '*'  # Запуск на каждый коммит в любую ветку
```
Приводит к излишнему расходу вычислительных мошьностей, долгому времени ожидания, шуму в логах, в общем случае является нецелесообразным.
### Хорошо
```yml
on:
  pull_request:
    branches:
      - main  # Запуск при создании пулл-реквеста в ветку main
  push:
    branches:
      - main  # Запуск при пуше в ветку main
```
## 3 
### Плохо 
```yml


```

### Хорошо
```yml


```
Будет лучше разделить пайплайн на этапы (сборка, тесты, деплой). Так CI/CD будет гибче его станет легче масштабировать. И добавим условия для начала следующего этапа пайплайна, так деплой не сможет начаться, если не были пройдены тесты, а те не начнутся без успешно сборки.
## 4 
### Плохо 
```yml


```

### Хорошо
```yml


```
## 5 
### Плохо 
```yml


```

### Хорошо
```yml


```
---
_______
# Выводы
Пока мы выполняли лабу познакомились с GitHub Actions и GitLab(пайплайны чекались там), узнали о пайплайназ и джобах,

познали занак бесконечности

![image](https://github.com/user-attachments/assets/4943abe3-9474-43c3-89f3-bd8983528be7)

